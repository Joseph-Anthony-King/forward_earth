namespace = fe

### fe.1 - Set Earth to nuked for I.C.A.R.U.S.
event = {
	id = fe.1
    hide_window = yes
    is_triggered_only = yes

    immediate = {

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = icarus_faction }
                    has_planet_flag = planet_earth
                }                
            }
            change_pc = pc_nuked
            set_planet_entity = { entity = "nuked_planet_earth_entity" }
        }
    }
}

### fe.2 - Instantiate Earth if not done so yet
event = {
	id = fe.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {

        random_country = {
            limit = {
                NOT = { any_system = { has_star_flag = sol } }
			}
			random_system = {
				limit = {
					has_owner = no
				}
                random_list = {
                    # Space age humans
                    50 = { spawn_system = { initializer = "space_age_sol_system_initializer" } }
                    # Primitive humans
                    50 = { spawn_system = { initializer = "primitive_sol_system_initializer" } }
                }
			}
        }
    }
}

### fe.3 - Instantiate League of Human Colonies
event = {
	id = fe.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		
		random_planet = {
            limit = {
                AND = {
                    OR = {
                        any_country = { has_country_flag = human_1 }
                        any_country = { has_country_flag = human_2 }
                    }
                    has_planet_flag = epsilon_a_two
                }                
            }

            create_species = {
                name = Human
                plural = Humans
                class = "HUM"
                portrait = "human"
                homeworld = THIS
                traits = {
                    trait = "trait_adaptive"
                    trait = "trait_nomadic"
                    trait = "trait_wasteful"
                }
            }

            create_country = {
                name = "NAME_League_of_Human_Colonies"
                authority = auth_oligarchic
                day_zero_contact = no
                civics = {
                    civic = civic_increasing_urbanization
                    civic = civic_atmospheric_pollution
                }
                species = last_created
                ethos = {
                    ethic = "ethic_authoritarian"
                    ethic = "ethic_fanatic_militarist"
                }

                flag = {
                    icon = {
                        category = "spherical"
                        file = "flag_spherical_5.dds"
                    }
                    background= {
                        category = "backgrounds"
                        file = "vertical.dds"
                    }
                    colors={
                        "yellow"
                        "dark_green"
                        "null"
                        "null"
                    }
                }
                type = primitive
            }

            last_created_country = {
                set_graphical_culture = industrial_01
                set_country_flag = early_space_age
                set_primitive_age = early_space_age
            }
            set_owner = last_created_country

            create_primitive_blockers = yes

            create_fleet = {
                name = "Gateway"
                effect = {
                    set_owner = last_created_country
                    create_ship = {
                        name = "Gateway"
                        design = "NAME_Space_Station"
                    }
                    set_location = PREV
                }
            }

            while = {
                count = 4
                create_pop = {
                    species = last_created
                }
            }
            add_building = building_primitive_farm
            add_building = building_primitive_mine
            add_building = building_primitive_power_plant
            add_building = building_primitive_capital

            last_created_country = {
                capital_scope = { set_name = "Epsilon A II" }
            }
		}
    }
}

### fe.4 - Instantiate CoA if UNE exists
event = {
	id = fe.4
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		
		every_system = {
            limit = {
                AND = {
                    NOT = { any_country = { has_country_flag = human_2 } }
                    any_country = { has_country_flag = human_1 }
                    has_star_flag = eta_cassiopeiae_system_target
                }                
            }

            spawn_system = {
                min_distance >= 10
                max_distance <= 30
                initializer = "sol_with_eta_cassiopeiae_system_initializer" 
            }
        }
    }
}

### fe.5 - Set Human Space planet modifiers
event = {
	id = fe.5
	hide_window = yes
	is_triggered_only = yes

	immediate = {

        every_planet = {

            limit = { has_planet_flag = tau_ceti_system }
            add_modifier = {
                modifier = high_gravity
                days = -1
            }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
        }

        every_planet = {

            limit = { has_planet_flag = planet_aurora }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
        }

        every_planet = {

            limit = { has_planet_flag = planet_tithonus }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
        }

        every_planet = {

            limit = { has_planet_flag = epsilon_a_two }
            add_modifier = {
                modifier = high_gravity
                days = -1
            }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
            change_pc = pc_desert
            set_planet_entity = { entity = "desert_planet_02_entity" }
        }

        every_planet = {

            limit = { has_planet_flag = tau_ceti_4_moon }
            add_modifier = {
                modifier = lush_planet
                days = -1
            }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
        }
    }
}

### fe.6 - Set barycenters and notable stars
event = {
    id = fe.6
    hide_window = yes
    is_triggered_only = yes

    immediate = {

        random_system = {
            spawn_system = { initializer = "deneb_system" }
        }

        random_planet = {
            limit = {
                has_planet_flag = aurora_barycenter              
            }
            set_name = ""
        }

        random_planet = {
            limit = {
                has_planet_flag = eridani_barycenter              
            }
            set_name = ""
        }

        random_planet = {
            limit = {
                has_planet_flag = tau_ceti_barycenter              
            }
            set_name = ""
        }

        random_planet = {
            limit = {
                has_planet_flag = epsilon_indi_barycenter              
            }
            set_name = ""
        }
    }

    immediate = {

        random_system = {
            spawn_system = { initializer = "polaris_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "betelgeuse_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "rigel_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "vega_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "antares_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "canopus_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "fomalhaut_initializer" }
        }
        
        random_system = {
            spawn_system = { initializer = "tau_ceti_system" }
        }
        
        random_system = {
            spawn_system = { initializer = "epsilon_indi_system" }
        }
    }
}

### fe.7 - Revert Eta Cassiopeiae to default names if unpopulated
event = {
	id = fe.7
	hide_window = yes
	is_triggered_only = yes

	immediate = {

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_inferno
                }                
            }
            set_name = "Eta Cassiopeiae A I"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_astraeus
                }                
            }
            set_name = "Eta Cassiopeiae A II"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_notus
                }                
            }
            set_name = "Eta Cassiopeiae A IIa"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_eurus
                }                
            }
            set_name = "Eta Cassiopeiae A IIb"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_aurora
                }                
            }
            set_name = "Eta Cassiopeiae A IIIa"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_tithonus
                }                
            }
            set_name = "Eta Cassiopeiae A IIIb"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_anemoi
                }                
            }
            set_name = "Eta Cassiopeiae A IV"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_boreas
                }                
            }
            set_name = "Eta Cassiopeiae A IVa"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_zephyrus
                }                
            }
            set_name = "Eta Cassiopeiae A IVb"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_hyperion
                }                
            }
            set_name = "Eta Cassiopeiae A V"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_selene
                }                
            }
            set_name = "Eta Cassiopeiae A Va"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_jackson_s_planet
                }                
            }
            set_name = "Eta Cassiopeiae B I"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_olympus
                }                
            }
            set_name = "Eta Cassiopeiae B II"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_horae
                }                
            }
            set_name = "Eta Cassiopeiae B IIb"
        }
    }
}

### fe.8 - Set Earth to nuked if unpopulated and CoA instantiated
event = {
	id = fe.8
	hide_window = yes
	is_triggered_only = yes

	immediate = {

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_2 }
                    any_country = { NOT = { any_country = { has_country_flag = human_1 } } }
                    has_planet_flag = planet_earth
                }                
            }
            change_pc = pc_nuked
            set_planet_entity = { entity = "nuked_planet_earth_entity" }
        }
    }
}