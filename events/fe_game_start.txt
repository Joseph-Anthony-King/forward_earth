namespace = fe

### fe.1 - Set Earth to nuked for I.C.A.R.U.S.
event = {
	id = fe.1
    hide_window = yes
    is_triggered_only = yes

    immediate = {

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = icarus_faction }
                    has_planet_flag = planet_earth
                }                
            }
            change_pc = pc_nuked
            set_planet_entity = { entity = "nuked_planet_earth_entity" }
        }
    }
}

### fe.2 - Instantiate Earth if not done so yet
event = {
	id = fe.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {

        random_country = {
            limit = {
                NOT = { any_system = { has_star_flag = sol } }
			}
			random_system = {
				limit = {
					has_owner = no
				}
                random_list = {
                    # Space age humans
                    50 = { spawn_system = { initializer = "space_age_sol_system_initializer" } }
                    # Primitive humans
                    50 = { spawn_system = { initializer = "primitive_sol_system_initializer" } }
                }
			}
        }
    }
}

### fe.3 - Instantiate League of Human Colonies
event = {
	id = fe.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		
		random_planet = {
            limit = {
                AND = {
                    OR = {
                        any_country = { has_country_flag = human_1 }
                        any_country = { has_country_flag = human_2 }
                    }
                    has_planet_flag = epsilon_a_two
                }                
            }

            random_country = {
                limit = { has_country_flag = human_1 }
                owner_species = { save_event_target_as = human_species }
            }

            create_country = {
                name = "NAME_League_of_Human_Colonies"
				name_list = "HUMAN1"                
                ship_prefix = "LHCS"
	
                room = "personality_honorbound_warriors_room"
                
                authority = "auth_oligarchic"
                government = gov_war_council
			    set_graphical_culture = mammalian_01
                
                origin = "origin_lost_colony"

                species = event_target:human_species
                ethos = {
                    ethic = "ethic_authoritarian"
                    ethic = "ethic_fanatic_militarist"
                }
                civics = {
                    civic = civic_cutthroat_politics
                    civic = civic_warrior_culture
                }
                flag = {
                    icon = {
                        category="spherical"
                        file="flag_spherical_8.dds"
                    }
                    background = {
                        category="backgrounds"
                        file="vertical.dds"
                    }
                    colors = {
                        "dark_green"
                        "yellow"
                        "null"
                        "null"
                    }
                }
                type = default
                flags = { human_3 }
            }
            
            set_owner = last_created_country

            create_primitive_blockers = yes

            while = {
                count = 4
                create_pop = {
                    species = event_target:human_species
                }
            }

            set_owner = last_created_country
            set_capital = yes
            add_district = district_farming
            add_district = district_farming
            add_district = district_mining
            add_district = district_generator
            add_building = building_capital

            last_created_country = {
                capital_scope = { set_name = "Eridani A II" }
                set_graphical_culture = mammalian_01
            }
		}
    }
}

### fe.4 - Instantiate CoA if UNE exists
event = {
	id = fe.4
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		
		random_planet = {
            limit = {
                AND = {
                    not = { any_country = { has_country_flag = human_2 } }
                    any_country = { has_country_flag = human_1 }
                    has_planet_flag = coa_home
                }                
            }

            random_list = {

                90 = {

                    random_country = {
                        limit = { has_country_flag = human_1 }
                        owner_species = { save_event_target_as = human_species }
                    }

                    create_country = {
                        name = "NAME_Commonwealth_of_Aurora"
                        name_list = "HUMAN2"                
                        ship_prefix = "CAS"
            
                        room = "personality_hegemonic_imperialists_room"
                        
                        authority = "auth_oligarchic"
                        government = gov_citizen_stratocracy
			            set_graphical_culture = mammalian_01
                        
                        origin = "origin_lost_colony"
                        effect = {
                            save_global_event_target_as = npc_CoA
                            add_resource = {
                                minerals = 800
                                energy = 800
                                food = 800
                                alloys = 400
                                consumer_goods = 400
                                influence = 200
                            }
                        }

                        species = event_target:human_species
                        ethos = {
                            ethic = "ethic_militarist"
                            ethic = "ethic_fanatic_materialist"
                        }
                        civics = {
                            civic = civic_meritocracy
                            civic = civic_citizen_service
                        }
                        flag = {
                            icon = {
                                category="human"
                                file="flag_human_4.dds"
                            }
                            background = {
                                category="backgrounds"
                                file="stripe.dds"
                            }
                            colors = {
                                "red"
                                "black"
                                "null"
                                "null"
                            }
                        }
                        type = default
                        flags = { human_faction }
                    }                        

                    event_target:npc_CoA = {
                        capital_scope = { set_name = "Aurora" }	
                        set_country_flag = human_2
                        save_global_event_target_as = CoA
                        create_starting_leaders = yes
                        country_event = { id = game_start.9 }
                        country_event = { id = game_start.33 days = 1 } # needs delay for system ownership to settle
                    }
                    
                    set_owner = event_target:npc_CoA

                    create_primitive_blockers = yes

                    while = {	
                        count = 16	
                        create_pop = {	
                            species = event_target:human_species	
                            ethos = {	
                                ethic = "ethic_militarist"	
                            }	
                        }	
                    }
                    
                    create_species = {	
                        name = "NAME_Robot"	
                        plural = "NAME_Robots"	
                        class = ROBOT	
                        namelist = this	
                        portrait = "default_robot"	
                        traits = {	
                            trait = "trait_mechanical"	
                        }	
                    }	

                    while = {	
                        count = 7	
                        create_pop = {	
                            species = last_created	
                        }	
                    }                        

                    set_owner = last_created_country	
                    set_capital = yes	
                    add_district = district_city	
                    add_district = district_city	
                    add_district = district_city	
                    add_district = district_city	
                    add_district = district_farming	
                    add_district = district_farming	
                    add_district = district_farming	
                    add_district = district_mining	
                    add_district = district_mining	
                    add_district = district_generator	
                    add_district = district_generator	
                    add_building = building_capital	
                    add_building = building_research_lab_1	
                    add_building = building_foundry_1	
                    add_building = building_factory_1

                    create_colony = {	
                        owner = event_target:npc_CoA
                        species = event_target:human_species	
                        ethos = {	
                            ethic = "ethic_xenophobe"	
                            ethic = "ethic_fanatic_militarist"				
                        }	
                    }	

                    create_army = {	
                        name = "1st Colonial Gendarmerie"	
                        owner = event_target:npc_CoA
                        species = event_target:human_species	
                        type = "defense_army"	
                    }	
                    create_army = {	
                        name = "2nd Colonial Gendarmerie"	
                        owner = event_target:npc_CoA
                        species = event_target:human_species	
                        type = "defense_army"	
                    }

                    solar_system = {

                        # starbase
                        create_starbase = {
                            size = starbase_starport
                            module = shipyard
                            building = crew_quarters
                            owner = event_target:npc_CoA
                            effect = {
                                set_starbase_module = {
                                    slot = 1
                                    module = trading_hub
                                }
                            }
                        }
                    }

                    last_created_country = {
                        set_graphical_culture = mammalian_01
                    }
                }
                10 = {}
            }
		}
    }
}

### fe.5 - Set Human Space planet modifiers
event = {
	id = fe.5
	hide_window = yes
	is_triggered_only = yes

	immediate = {

        every_planet = {

            limit = { has_planet_flag = tau_ceti_system }
            add_modifier = {
                modifier = high_gravity
                days = -1
            }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
        }

        every_planet = {

            limit = { has_planet_flag = planet_aurora }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
        }

        every_planet = {

            limit = { has_planet_flag = planet_tithonus }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
        }

        every_planet = {

            limit = { has_planet_flag = epsilon_a_two }
            add_modifier = {
                modifier = high_gravity
                days = -1
            }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
            change_pc = pc_desert
            set_planet_entity = { entity = "desert_planet_02_entity" }
        }

        every_planet = {

            limit = { has_planet_flag = tau_ceti_4_moon }
            add_modifier = {
                modifier = lush_planet
                days = -1
            }
            add_modifier = {
                modifier = strong_magnetic_field
                days = -1
            }
        }

        every_planet = {

            limit = { has_planet_flag = planet_chicora }

            change_pc = pc_arid
            set_planet_entity = { entity = "arid_planet_03_entity" }
        }
    }
}

### fe.6 - Set barycenters and notable stars
event = {
    id = fe.6
    hide_window = yes
    is_triggered_only = yes

    immediate = {

        random_system = {
            spawn_system = { initializer = "polaris_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "betelgeuse_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "rigel_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "vega_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "antares_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "canopus_initializer" }
        }

        random_system = {
            spawn_system = { initializer = "fomalhaut_initializer" }
        }
        
        random_system = {
            spawn_system = { initializer = "vy_canis_majoris_initializer" }
        }
        
        random_system = {
            spawn_system = { initializer = "mu_cephei_initializer" }
        }
        
        random_system = {
            spawn_system = { initializer = "kobol_initializer" }
        }
        
        random_system = {
            spawn_system = { initializer = "tau_ceti_system" }
        }
        
        random_system = {
            spawn_system = { initializer = "epsilon_indi_system" }
        }
    }

    immediate = {

        random_system = {
            spawn_system = { initializer = "deneb_system" }
        }

        random_planet = {
            limit = {
                has_planet_flag = aurora_barycenter              
            }
            set_name = ""
        }

        random_planet = {
            limit = {
                has_planet_flag = eridani_barycenter              
            }
            set_name = ""
        }

        random_planet = {
            limit = {
                has_planet_flag = tau_ceti_barycenter              
            }
            set_name = ""
        }

        random_planet = {
            limit = {
                has_planet_flag = epsilon_indi_barycenter              
            }
            set_name = ""
        }

        random_planet = {
            limit = {
                has_planet_flag = kobol_barycenter              
            }
            set_name = ""
        }
    }
}

### fe.7 - Revert Eta Cassiopeiae to default names if unpopulated
event = {
	id = fe.7
	hide_window = yes
	is_triggered_only = yes

	immediate = {

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_inferno
                }                
            }
            set_name = "Eta Cassiopeiae A I"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_astraeus
                }                
            }
            set_name = "Eta Cassiopeiae A II"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_notus
                }                
            }
            set_name = "Eta Cassiopeiae A IIa"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_eurus
                }                
            }
            set_name = "Eta Cassiopeiae A IIb"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_aurora
                }                
            }
            set_name = "Eta Cassiopeiae A IIIa"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_tithonus
                }                
            }
            set_name = "Eta Cassiopeiae A IIIb"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_anemoi
                }                
            }
            set_name = "Eta Cassiopeiae A IV"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_boreas
                }                
            }
            set_name = "Eta Cassiopeiae A IVa"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_zephyrus
                }                
            }
            set_name = "Eta Cassiopeiae A IVb"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_hyperion
                }                
            }
            set_name = "Eta Cassiopeiae A V"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_selene
                }                
            }
            set_name = "Eta Cassiopeiae A Va"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_jackson_s_planet
                }                
            }
            set_name = "Eta Cassiopeiae B I"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_olympus
                }                
            }
            set_name = "Eta Cassiopeiae B II"
        }

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_1 }
                    any_country = { NOT = { any_country = { has_country_flag = human_2 } } }
                    has_planet_flag = planet_horae
                }                
            }
            set_name = "Eta Cassiopeiae B IIb"
        }
    }
}

### fe.8 - Set Earth to nuked if unpopulated and CoA instantiated
event = {
	id = fe.8
	hide_window = yes
	is_triggered_only = yes

	immediate = {

        random_planet = {
            limit = {
                AND = {
                    any_country = { has_country_flag = human_2 }
                    any_country = { NOT = { any_country = { has_country_flag = human_1 } } }
                    has_planet_flag = planet_earth
                }                
            }
            change_pc = pc_nuked
            set_planet_entity = { entity = "nuked_planet_earth_entity" }
        }
    }
}

### fe.9 - Set League of Human Colonies resources
event = {
	id = fe.9
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = { any_country = { has_country_flag = human_3 }
			effect = {
				add_resource = {
                    minerals = 0
                    energy = 0
                    food = 0
                    alloys = 0
                    consumer_goods = 0
                    influence = 0
				}
            }
		}
	}
}

### fe.10 - Set CoA graphical culture
event = {
	id = fe.10
	hide_window = yes
	is_triggered_only = yes

    immediate = {

        if = {            
            limit = { has_country_flag = human_2 }
            set_graphical_culture = mammalian_01
        }

    }
}